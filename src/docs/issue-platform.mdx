---
title: "Issue Platform"
---

The Issue Platform allows developers to create new issue types from data streams.

To use the Issue Platform you need to

1. Write a Detector
2. Register an issue type
3. Start Occurrences to the Issue Platform


## Writing a Detector
The first step to introducing a new issue type to Sentry is to determine what type of
issue you want to detect. It can be from any data stream, as long as you can produce an
<Link to="#send-occurrences-to-the-issue-platform"Occurrence></Link> representing the issue

## Register an Issue Type
To register a new issue type you need to subclass `GroupType` https://github.com/getsentry/sentry/blob/ef76b0765f6c057af12b1cd0dc2de6b42a938c02/src/sentry/issues/grouptype.py#L98-L108

When registering the class, set the following required attributes on the class:
- type_id: A unique integer to identify your issue type.
- slug: A unique slug to identify your issue type. Used to search by issue type in the issue stream
- description: A human readable description of your issue type [include where this is used]
- category: The overall category that your issue type belongs to. [include docs on creating a category]

You may also set these optional attributes:
- noise_config: A `NoiseConfig` that allows you to set policy on how many times a fingerprint must occur in a period of time before an issue is created
  
TODO: Include docs about releasing and explain how `- released: bool = False` is used

Here's an example issue type:
```
@dataclass(frozen=True)
class ProfileFileIOGroupType(GroupType):
    type_id = 2001
    slug = "profile_file_io_main_thread"
    description = "File I/O on Main Thread"
    category = GroupCategory.PROFILE.value
```



## Send Occurrences to the Issue Platform
If operating within the Sentry codebase, you can call `sentry.issues.produce_occurrence_to_kafka` https://github.com/getsentry/sentry/blob/master/src/sentry/issues/producer.py#L28-L30
and pass in the Occurrence, and optionally the `Event` data.

If operating from a separate service pass a json payload with this format:
[format]

Issue Evidence
- name: str.
- value: str
- important: bool. Whether this entry contains important data to display to the user.
One entry should be marked as important, and it will be displayed in space constrained
integrations.


Issue Occurrence:
Required:
- id: str. A user generated uuid in string format representing a unique id for this occurrence.
Generally it's a good idea to generate this separately to your event id.
- project_id: int. Id of the project this occurred in
- event_id: str.
- event: [Event].
- fingerprint: Sequence[str].  Unique identifier for the root cause of this problem.
Used for aggregating occurrences together into groups. We only make use of the first
fingerprint for the moment - if you have a use case for additional fingerprints let the
issue platform team know.
- issue_title: str. A short description of the problem. This will be used as the title
of the issue and also used in notifications.
- subtitle: str: [todo]
- evidence_data: Mapping[str, Any]. An arbitrary map of data. The issue platform doesn't
make use of this data directly, it just make it available for use on the frontend and in
notifications.  This can be used to customize the issue details ui, notifications and so on.
- evidence_display: Sequence[IssueEvidenceData]. A sequence of `IssueEvidenceData` entries.
These are used to display generic information about your issue in the issue details ui and
in various notifications. Even if you are customizing the ui and email, it's recommended
to include this so that we can display information correctly on all our other integrations.
Typically these will be displayed in a table when space allows. For space limited integrations
we'll display one row that is labelled `important` if available.
- type: int: The type of issue you are created. Maps to `type_id` in your registered `GroupType`.
- detection_time: float. A timestamp representing when the issue was detected.
- level: str
- culprit: str

Optional:
- resource_id: str | None. An identifier used to link to an external system to load data.
For example, this could be an id that we use to build a link to a specific product page.


## Releasing your issue type
The issue platform provides a few things to help with releasing your new issue type in
a controlled way. It creates feature flags to control whether the issue types are ingested,
go through post processing (for sending notifications etc) and whether to display them in the
ui.

The flags for ingest and post processing are backed by options, and we automatically register
these when the issue type is created. These options can be enabled for LA/EA/GA here
https://sentry.io/_admin/options/.

The flag for the UI uses flagr. We're unable to register things in flagr automatically
at the moment, so you'll need to create the flagr yourself. It will be in the format
`organizations:[GroupType.slug.replace("_", "-")]-visible`.

Once your issue type is fully released and you want it to go out to self-hosted and single tenant
you can set `release = True` on your GroupType. This allows it to be released everywhere, and
removes the feature flags and options. Generally we recommend doing this after your issue type
has been in GA for long enough to verify that it's working as intended.
